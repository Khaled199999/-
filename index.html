<!-- Ø§Ù„ÙƒÙˆØ¯ Ø£Ø¹Ù„Ø§Ù‡ ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ Ø¨Ø¯ÙˆÙ† ØªØ¹Ø¯ÙŠÙ„ -->

<!-- Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØªØªØ¨Ø¹ Ø§Ù„Ù†Ù‚Ø§Ø· -->
<div id="user-auth" style="margin-bottom: 2rem;">
  <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h3>
  <input type="text" id="fullName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ" style="padding: 0.5rem; font-size: 1rem; margin: 0.5rem 0; width: 100%; max-width: 300px;">
  <button onclick="loginUser()">Ø¯Ø®ÙˆÙ„</button>
  <p id="loginStatus" style="margin-top: 0.5rem; color: green;"></p>
</div>

<div id="userPanel" style="display:none; margin-bottom: 2rem; background:#f4fff7; padding: 1rem; border: 1px solid #ccc; border-radius: 8px;">
  <p><strong>Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ <span id="userName"></span>!</strong></p>
  <p>ğŸ“Š ØªÙ‚Ø¯Ù…Ùƒ ÙÙŠ Ø§Ù„ØªØ¹Ù„Ù…: <span id="progressPercent">0%</span></p>
  <p>â­ Ù†Ù‚Ø§Ø·Ùƒ: <span id="userPoints">0</span> Ù†Ù‚Ø·Ø©</p>
</div>

<script>
let currentUser = null;
const progressKey = 'arabicSiteProgress';

function loginUser() {
  const fullName = document.getElementById('fullName').value.trim();
  if (!fullName || fullName.split(' ').length < 2) {
    alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.');
    return;
  }
  currentUser = fullName;
  localStorage.setItem('arabicUser', fullName);
  if (!localStorage.getItem(`${progressKey}_${fullName}`)) {
    localStorage.setItem(`${progressKey}_${fullName}`, JSON.stringify({ points: 0, progress: 0 }));
  }
  updateUserPanel();
}

function updateUserPanel() {
  const data = JSON.parse(localStorage.getItem(`${progressKey}_${currentUser}`));
  document.getElementById('user-auth').style.display = 'none';
  document.getElementById('userPanel').style.display = 'block';
  document.getElementById('userName').textContent = currentUser;
  document.getElementById('progressPercent').textContent = `${data.progress}%`;
  document.getElementById('userPoints').textContent = data.points;
}

function increaseProgress(pointsToAdd = 10, percentToAdd = 20) {
  if (!currentUser) return;
  const key = `${progressKey}_${currentUser}`;
  const data = JSON.parse(localStorage.getItem(key));
  data.points += pointsToAdd;
  data.progress = Math.min(data.progress + percentToAdd, 100);
  localStorage.setItem(key, JSON.stringify(data));
  updateUserPanel();
}

window.onload = function () {
  const saved = localStorage.getItem('arabicUser');
  if (saved) {
    currentUser = saved;
    updateUserPanel();
  }
  const completions = document.querySelectorAll('p');
  completions.forEach(p => {
    if (p.textContent.includes('Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø©')) {
      setTimeout(() => increaseProgress(10, 20), 500);
    }
  });
};
</script>
